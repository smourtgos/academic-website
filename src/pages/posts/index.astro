---
import BaseLayout from '../../layouts/BaseLayout.astro';
import PostCard from '../../components/PostCard.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('posts', ({ data }) => !data.draft);
const sorted = allPosts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<BaseLayout title="Posts | Scott M. Mourtgos">
  <section class="py-12">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-8">Posts</h1>
      <div class="space-y-8">
        {sorted.map((post) => (
          <PostCard
            title={post.data.title}
            date={post.data.date}
            summary={post.data.summary}
            tags={post.data.tags}
            slug={post.id}
          />
        ))}
      </div>
    </div>
  </section>
</BaseLayout>
